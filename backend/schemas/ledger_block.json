{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Ledger Block",
  "description": "Schema for transparency ledger blocks in OQT-1.0 pipeline",
  "type": "object",
  "required": ["block_id", "timestamp", "previous_hash", "current_hash", "event_type", "data"],
  "properties": {
    "block_id": {
      "type": "number",
      "minimum": 0,
      "description": "Sequential block identifier (0 is genesis block)"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of block creation"
    },
    "previous_hash": {
      "type": "string",
      "description": "Hash of the previous block (null for genesis block)"
    },
    "current_hash": {
      "type": "string",
      "description": "Hash of this block's data"
    },
    "event_type": {
      "type": "string",
      "enum": ["training", "update", "audit", "review", "data_collection"],
      "description": "Type of event recorded in this block"
    },
    "data": {
      "type": "object",
      "description": "Event-specific data",
      "properties": {
        "model_version": {
          "type": "string",
          "description": "Model version affected by this event"
        },
        "training_samples": {
          "type": "number",
          "minimum": 0,
          "description": "Number of training samples involved"
        },
        "fairness_metrics": {
          "type": "object",
          "description": "Fairness metrics at this point"
        },
        "bias_metrics": {
          "type": "object",
          "description": "Bias metrics at this point"
        },
        "provenance": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Data source provenance information"
        },
        "changes": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "field": {
                "type": "string"
              },
              "old_value": {},
              "new_value": {}
            }
          },
          "description": "Changes made in this event"
        }
      }
    },
    "signatures": {
      "type": "object",
      "description": "Cryptographic signatures for verification",
      "properties": {
        "data_hash": {
          "type": "string",
          "description": "Hash of the data field for integrity verification"
        },
        "validator": {
          "type": "string",
          "description": "Identifier of the validator/creator of this block"
        }
      }
    }
  }
}
